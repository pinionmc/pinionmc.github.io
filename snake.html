<!DOCTYPE html>
<html>

<head>
  <title>Snake Game</title>
  <style>
    #game-board {
      width: 400px;
      height: 400px;
      border: 1px solid black;
      position: relative;
    }

    .snake {
      width: 20px;
      height: 20px;
      background-color: green;
      position: absolute;
    }

    .food {
      width: 20px;
      height: 20px;
      background-color: red;
      position: absolute;
    }
  </style>
</head>

<body>
  <div id="game-board"></div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const boardSize = 400; // Size of the game board in pixels
      const gridSize = 20; // Size of each grid cell in pixels
      const snakeColor = 'green';
      const foodColor = 'red';

      const gameBoard = document.getElementById('game-board');
      let snake = []; // Initial position of the snake
      let food = {x: 0, y: 0}; // Initial position of the food
      let direction = 'right'; // Initial direction of the snake
      let gameStarted = false; // Flag to check if the game has started

      function createSnake() {
        snake.forEach(segment => {
          const snakeElement = document.createElement('div');
          snakeElement.style.left = segment.x + 'px';
          snakeElement.style.top = segment.y + 'px';
          snakeElement.classList.add('snake');
          gameBoard.appendChild(snakeElement);
        });
      }

      function createFood() {
        food = {
          x: Math.floor(Math.random() * (boardSize / gridSize)) * gridSize,
          y: Math.floor(Math.random() * (boardSize / gridSize)) * gridSize
        };

        const foodElement = document.createElement('div');
        foodElement.style.left = food.x + 'px';
        foodElement.style.top = food.y + 'px';
        foodElement.classList.add('food');
        gameBoard.appendChild(foodElement);
      }

      function moveSnake() {
        const head = {x: snake[0].x, y: snake[0].y};

        if (direction === 'right') {
          head.x += gridSize;
        } else if (direction === 'left') {
          head.x -= gridSize;
        } else if (direction === 'up') {
          head.y -= gridSize;
        } else if (direction === 'down') {
          head.y += gridSize;
        }

        snake.unshift(head);

        if (head.x === food.x && head.y === food.y) {
          const foodElement = document.getElementsByClassName('food')[0];
          gameBoard.removeChild(foodElement);
          createFood();
        } else {
          snake.pop();
        }
      }

      function updateSnake() {
        const snakeElements = document.getElementsByClassName('snake');
        while (snakeElements.length > 0) {
          gameBoard.removeChild(snakeElements[0]);
        }
        createSnake();
      }

      function changeDirection(event) {
        const key = event.keyCode;
        if (!gameStarted) {
          // Start the game on arrow key press or spacebar
          if ((key >= 37 && key <= 40) || key === 32) {
            gameStarted = true;
            gameInterval = setInterval(gameLoop, 150);
          }
        } else {
          // Change snake direction
          if (key === 37 && direction !== 'right') {
            direction = 'left';
          } else if (key === 38 && direction !== 'down') {
            direction = 'up';
          } else if (key === 39 && direction !== 'left') {
            direction = 'right';
          } else if (key === 40 && direction !== 'up') {
            direction = 'down';
          }
        }
      }

      function checkCollision() {
        const head = snake[0];
        if (
          head.x < 0 ||
          head.x >= boardSize ||
          head.y < 0 ||
          head.y >= boardSize ||
          snake.slice(1).some(segment => segment.x === head.x && segment.y === head.y)
        ) {
          clearInterval(gameInterval);
          alert('Game over! Your score: ' + (snake.length - 1));
          resetGame();
        }
      }

      function resetGame() {
        gameStarted = false;
        snake = [{x: 0, y: 0}];
        direction = 'right';
        while (gameBoard.firstChild) {
          gameBoard.removeChild(gameBoard.firstChild);
        }
        createSnake();
        createFood();
      }

      function gameLoop() {
        moveSnake();
        checkCollision();
        updateSnake();
      }

      resetGame(); // Call the function to initialize the game

      let gameInterval;
      document.addEventListener('keydown', changeDirection);
    });
  </script>
</body>

</html>